# ğŸ› ï¸ å¼€å‘æŒ‡å—

## é¡¹ç›®ç»“æ„

```
auto-commit-assistant/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ extension.ts          # ä¸»è¦æ‰©å±•ä»£ç 
â”œâ”€â”€ out/                       # ç¼–è¯‘è¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ .vscode/                   # VSCode é…ç½®
â”‚   â”œâ”€â”€ launch.json           # è°ƒè¯•é…ç½®
â”‚   â”œâ”€â”€ tasks.json            # ä»»åŠ¡é…ç½®
â”‚   â””â”€â”€ extensions.json       # æ¨èæ‰©å±•
â”œâ”€â”€ package.json              # æ‰©å±•æ¸…å•æ–‡ä»¶
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â”œâ”€â”€ .eslintrc.json            # ESLint é…ç½®
â”œâ”€â”€ .gitignore                # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .vscodeignore             # å‘å¸ƒæ—¶å¿½ç•¥çš„æ–‡ä»¶
â”œâ”€â”€ README.md                 # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ CHANGELOG.md              # æ›´æ–°æ—¥å¿—
â”œâ”€â”€ LICENSE                   # è®¸å¯è¯
â”œâ”€â”€ å‘å¸ƒæŒ‡å—.md               # å‘å¸ƒæµç¨‹
â””â”€â”€ å¼€å‘æŒ‡å—.md               # æœ¬æ–‡ä»¶
```

## å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœä»ä»“åº“å…‹éš†ï¼‰

```bash
git clone https://github.com/your-username/auto-commit-assistant.git
cd auto-commit-assistant
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¼–è¯‘é¡¹ç›®

```bash
npm run compile
```

### 4. å¯åŠ¨è°ƒè¯•

1. åœ¨ VSCode ä¸­æ‰“å¼€é¡¹ç›®
2. æŒ‰ `F5` æˆ–ç‚¹å‡»"è¿è¡Œå’Œè°ƒè¯•"
3. é€‰æ‹©"è¿è¡Œæ‰©å±•"
4. ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ VSCode çª—å£ï¼ˆæ‰©å±•å¼€å‘å®¿ä¸»ï¼‰
5. åœ¨æ–°çª—å£ä¸­æµ‹è¯•æ’ä»¶åŠŸèƒ½

### 5. å¼€å‘æ¨¡å¼

```bash
npm run watch
```

è¿™ä¼šç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°ç¼–è¯‘ã€‚ä¿®æ”¹ä»£ç åï¼Œåœ¨æ‰©å±•å¼€å‘å®¿ä¸»çª—å£ä¸­æŒ‰ `Ctrl+R` é‡æ–°åŠ è½½ã€‚

## æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. é…ç½®å¿«æ·é”®

**å…³é”®ä»£ç ä½ç½®ï¼š** `src/extension.ts` ä¸­çš„ `setupKeybindings()` å‡½æ•°

**å®ç°é€»è¾‘ï¼š**
1. æ ¹æ®å¹³å°å’Œç¼–è¾‘å™¨ç±»å‹ç¡®å®šé…ç½®æ–‡ä»¶è·¯å¾„
2. è¯»å–ç°æœ‰çš„ `keybindings.json`
3. æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒé…ç½®
4. æ·»åŠ æˆ–æ›´æ–°å¿«æ·é”®é…ç½®
5. å†™å›æ–‡ä»¶

**å…³é”® APIï¼š**
- `process.platform` - åˆ¤æ–­æ“ä½œç³»ç»Ÿ
- `vscode.env.appName` - åˆ¤æ–­æ˜¯ Cursor è¿˜æ˜¯ VSCode
- Node.js `fs` æ¨¡å— - æ–‡ä»¶æ“ä½œ

### 2. åˆ›å»º/åˆå¹¶ .cursorrules

**å…³é”®ä»£ç ä½ç½®ï¼š** `src/extension.ts` ä¸­çš„ `setupCursorRules()` å‡½æ•°

**å®ç°é€»è¾‘ï¼š**
1. è·å–å·¥ä½œåŒºæ ¹ç›®å½•
2. æ£€æŸ¥ `.cursorrules` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. å¦‚æœå­˜åœ¨ï¼Œè¯»å–å†…å®¹å¹¶æ£€æŸ¥æ˜¯å¦å·²åŒ…å«è§„åˆ™
4. å¦‚æœä¸å­˜åœ¨æˆ–æœªåŒ…å«ï¼Œåˆ™åˆ›å»ºæˆ–åˆå¹¶è§„åˆ™
5. æç¤ºç”¨æˆ·æŸ¥çœ‹æ–‡ä»¶

**å…³é”® APIï¼š**
- `vscode.workspace.workspaceFolders` - è·å–å·¥ä½œåŒºä¿¡æ¯
- Node.js `fs` æ¨¡å— - æ–‡ä»¶æ“ä½œ

### 3. é¦–æ¬¡è‡ªåŠ¨é…ç½®

**å…³é”®ä»£ç ä½ç½®ï¼š** `src/extension.ts` ä¸­çš„ `checkAndAutoSetup()` å‡½æ•°

**å®ç°é€»è¾‘ï¼š**
1. æ£€æŸ¥é…ç½®é¡¹ `autoSetupOnStartup`
2. æ£€æŸ¥å…¨å±€çŠ¶æ€ `hasSetup` æ ‡è®°
3. å¦‚æœæœªé…ç½®è¿‡ï¼Œæ˜¾ç¤ºæç¤ºå¯¹è¯æ¡†
4. æ ¹æ®ç”¨æˆ·é€‰æ‹©æ‰§è¡Œç›¸åº”æ“ä½œ

**å…³é”® APIï¼š**
- `vscode.workspace.getConfiguration()` - è¯»å–é…ç½®
- `context.globalState` - æŒä¹…åŒ–çŠ¶æ€
- `vscode.window.showInformationMessage()` - æ˜¾ç¤ºå¯¹è¯æ¡†

## æ‰©å±• API è¯¦è§£

### æ¿€æ´»äº‹ä»¶ï¼ˆpackage.jsonï¼‰

```json
"activationEvents": [
  "onStartupFinished"
]
```

- `onStartupFinished`ï¼šåœ¨ VSCode å®Œå…¨å¯åŠ¨åæ¿€æ´»ï¼Œä¸é˜»å¡å¯åŠ¨è¿‡ç¨‹

### è´¡çŒ®ç‚¹ï¼ˆpackage.jsonï¼‰

#### å‘½ä»¤ï¼ˆcommandsï¼‰

```json
"commands": [
  {
    "command": "auto-commit-assistant.setup",
    "title": "AI Auto Commit: åˆå§‹åŒ–é…ç½®"
  }
]
```

#### é…ç½®é¡¹ï¼ˆconfigurationï¼‰

```json
"configuration": {
  "properties": {
    "autoCommitAssistant.autoSetupOnStartup": {
      "type": "boolean",
      "default": true,
      "description": "åœ¨å·¥ä½œåŒºé¦–æ¬¡æ‰“å¼€æ—¶è‡ªåŠ¨é…ç½®"
    }
  }
}
```

### ä¸»è¦å‡½æ•°è¯´æ˜

#### `activate(context: vscode.ExtensionContext)`

**ä½œç”¨ï¼š** æ‰©å±•æ¿€æ´»æ—¶è°ƒç”¨

**èŒè´£ï¼š**
- æ³¨å†Œæ‰€æœ‰å‘½ä»¤
- æ£€æŸ¥æ˜¯å¦éœ€è¦è‡ªåŠ¨é…ç½®
- å°†è®¢é˜…æ·»åŠ åˆ° context.subscriptions

#### `deactivate()`

**ä½œç”¨ï¼š** æ‰©å±•åœç”¨æ—¶è°ƒç”¨

**èŒè´£ï¼š**
- æ¸…ç†èµ„æºï¼ˆå¦‚æœéœ€è¦ï¼‰

#### `setupKeybindings()`

**ä½œç”¨ï¼š** é…ç½®å¿«æ·é”®

**æµç¨‹ï¼š**
1. è¯»å–ç”¨æˆ·é…ç½®
2. ç¡®å®šé…ç½®æ–‡ä»¶è·¯å¾„
3. è¯»å–æˆ–åˆ›å»º keybindings.json
4. æ›´æ–°é…ç½®
5. å†™å›æ–‡ä»¶

#### `setupCursorRules()`

**ä½œç”¨ï¼š** é…ç½® Cursor è§„åˆ™

**æµç¨‹ï¼š**
1. è·å–å·¥ä½œåŒºè·¯å¾„
2. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. åˆ›å»ºæˆ–åˆå¹¶è§„åˆ™
4. æç¤ºç”¨æˆ·

## è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨æ§åˆ¶å°è¾“å‡º

```typescript
console.log('è°ƒè¯•ä¿¡æ¯');
```

è¾“å‡ºä¼šæ˜¾ç¤ºåœ¨"è°ƒè¯•æ§åˆ¶å°"ä¸­ã€‚

### 2. æ–­ç‚¹è°ƒè¯•

åœ¨ä»£ç è¡Œå·å·¦ä¾§ç‚¹å‡»è®¾ç½®æ–­ç‚¹ï¼ŒæŒ‰ `F5` å¯åŠ¨è°ƒè¯•ã€‚

### 3. æŸ¥çœ‹æ‰©å±•æ—¥å¿—

åœ¨æ‰©å±•å¼€å‘å®¿ä¸»çª—å£ä¸­ï¼š
- æ‰“å¼€"è¾“å‡º"é¢æ¿ï¼ˆ`Ctrl+Shift+U`ï¼‰
- é€‰æ‹©"æ‰©å±•ä¸»æœº"

### 4. é‡æ–°åŠ è½½æ‰©å±•

åœ¨æ‰©å±•å¼€å‘å®¿ä¸»çª—å£ä¸­æŒ‰ `Ctrl+R` é‡æ–°åŠ è½½æ‰©å±•ã€‚

## ä»£ç è§„èŒƒ

### TypeScript æœ€ä½³å®è·µ

```typescript
// âœ… ä½¿ç”¨æ˜ç¡®çš„ç±»å‹æ³¨è§£
function getPath(): string | null {
  // ...
}

// âœ… ä½¿ç”¨ async/await
async function setupAll() {
  await setupKeybindings();
  await setupCursorRules();
}

// âœ… å¤„ç†é”™è¯¯
try {
  // ...
} catch (error) {
  vscode.window.showErrorMessage(`é”™è¯¯ï¼š${error}`);
}

// âœ… æ·»åŠ  JSDoc æ³¨é‡Š
/**
 * é…ç½®å¿«æ·é”®åˆ° keybindings.json
 */
async function setupKeybindings() {
  // ...
}
```

### ESLint è§„åˆ™

é¡¹ç›®ä½¿ç”¨ TypeScript ESLintï¼Œä¸»è¦è§„åˆ™ï¼š
- ä½¿ç”¨åˆ†å·
- ä½¿ç”¨å¤§æ‹¬å·
- ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰ `===`
- å‘½åè§„èŒƒ

è¿è¡Œæ£€æŸ¥ï¼š
```bash
npm run lint
```

## æµ‹è¯•

### æ‰‹åŠ¨æµ‹è¯•æ¸…å•

- [ ] é¦–æ¬¡æ‰“å¼€å·¥ä½œåŒºæ—¶æ˜¾ç¤ºé…ç½®æç¤º
- [ ] "åˆå§‹åŒ–é…ç½®"å‘½ä»¤æ­£å¸¸å·¥ä½œ
- [ ] "é…ç½®å¿«æ·é”®"å‘½ä»¤æ­£å¸¸å·¥ä½œ
- [ ] "é…ç½® Cursor è§„åˆ™"å‘½ä»¤æ­£å¸¸å·¥ä½œ
- [ ] å¿«æ·é”®é…ç½®æ–‡ä»¶æ­£ç¡®æ›´æ–°
- [ ] .cursorrules æ–‡ä»¶æ­£ç¡®åˆ›å»º
- [ ] .cursorrules æ–‡ä»¶æ­£ç¡®åˆå¹¶ï¼ˆå¦‚å·²å­˜åœ¨ï¼‰
- [ ] è·¨å¹³å°å…¼å®¹æ€§ï¼ˆWindows/macOS/Linuxï¼‰
- [ ] VSCode å’Œ Cursor ç¯å¢ƒéƒ½èƒ½æ­£å¸¸å·¥ä½œ

### è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆTODOï¼‰

æœªæ¥å¯ä»¥æ·»åŠ ï¼š
```bash
npm run test
```

## æ€§èƒ½ä¼˜åŒ–

### 1. å»¶è¿Ÿæ¿€æ´»

ä½¿ç”¨ `onStartupFinished` è€Œä¸æ˜¯ `*`ï¼Œé¿å…å½±å“å¯åŠ¨é€Ÿåº¦ã€‚

### 2. å¼‚æ­¥æ“ä½œ

æ‰€æœ‰æ–‡ä»¶æ“ä½œéƒ½ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼š
```typescript
async function setupKeybindings() {
  // ä½¿ç”¨å¼‚æ­¥æ–‡ä»¶æ“ä½œ
}
```

### 3. ç¼“å­˜çŠ¶æ€

ä½¿ç”¨ `context.globalState` ç¼“å­˜é…ç½®çŠ¶æ€ï¼Œé¿å…é‡å¤æç¤ºã€‚

## å¸¸è§é—®é¢˜

### Q1: ä¿®æ”¹ä»£ç åæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ
**A:** åœ¨æ‰©å±•å¼€å‘å®¿ä¸»çª—å£æŒ‰ `Ctrl+R` é‡æ–°åŠ è½½æ‰©å±•ã€‚

### Q2: å¦‚ä½•æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Ÿ
**A:** æŸ¥çœ‹"è°ƒè¯•æ§åˆ¶å°"å’Œ"è¾“å‡º"é¢æ¿ä¸­çš„"æ‰©å±•ä¸»æœº"ã€‚

### Q3: å¦‚ä½•æ·»åŠ æ–°å‘½ä»¤ï¼Ÿ
**A:** 
1. åœ¨ `package.json` çš„ `commands` ä¸­æ·»åŠ å‘½ä»¤å®šä¹‰
2. åœ¨ `src/extension.ts` ä¸­ä½¿ç”¨ `vscode.commands.registerCommand()` æ³¨å†Œ
3. å°†è®¢é˜…æ·»åŠ åˆ° `context.subscriptions`

### Q4: å¦‚ä½•æ·»åŠ æ–°é…ç½®é¡¹ï¼Ÿ
**A:**
1. åœ¨ `package.json` çš„ `configuration.properties` ä¸­å®šä¹‰
2. åœ¨ä»£ç ä¸­ä½¿ç”¨ `vscode.workspace.getConfiguration()` è¯»å–

## æ‰©å±•å»ºè®®

### å¯ä»¥æ·»åŠ çš„åŠŸèƒ½

1. **è‡ªå®šä¹‰æäº¤æ¨¡æ¿**
   - å…è®¸ç”¨æˆ·è‡ªå®šä¹‰ Git æäº¤ä¿¡æ¯æ¨¡æ¿
   - æä¾›å¤šç§é¢„è®¾æ¨¡æ¿ä¾›é€‰æ‹©

2. **æäº¤å†å²è®°å½•**
   - è®°å½•æœ€è¿‘çš„æäº¤ä¿¡æ¯
   - æä¾›å¿«é€Ÿé€‰æ‹©å†å²æäº¤ä¿¡æ¯åŠŸèƒ½

3. **å›¢é˜Ÿè§„èŒƒåŒæ­¥**
   - æ”¯æŒä»è¿œç¨‹ä»“åº“åŒæ­¥ .cursorrules
   - æ”¯æŒå›¢é˜Ÿå…±äº«é…ç½®

4. **æ›´å¤šå¿«æ·é”®é€‰é¡¹**
   - æ”¯æŒåˆ†æ­¥æ“ä½œï¼ˆä»…ä¿å­˜ã€ä»…æš‚å­˜ç­‰ï¼‰
   - æ”¯æŒå¿«æ·é”®è‡ªå®šä¹‰

5. **æäº¤å‰æ£€æŸ¥**
   - ä»£ç æ ¼å¼æ£€æŸ¥
   - Linter æ£€æŸ¥
   - æµ‹è¯•è¿è¡Œ

### ä»£ç ç¤ºä¾‹

**æ·»åŠ æ–°é…ç½®é¡¹ï¼š**

```typescript
// package.json
"autoCommitAssistant.customTemplate": {
  "type": "string",
  "default": "",
  "description": "è‡ªå®šä¹‰æäº¤ä¿¡æ¯æ¨¡æ¿"
}

// extension.ts
const config = vscode.workspace.getConfiguration('autoCommitAssistant');
const template = config.get<string>('customTemplate', '');
```

## ç›¸å…³èµ„æº

- [VSCode API æ–‡æ¡£](https://code.visualstudio.com/api)
- [VSCode æ‰©å±•ç¤ºä¾‹](https://github.com/microsoft/vscode-extension-samples)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/)
- [Node.js æ–‡æ¡£](https://nodejs.org/docs/)

---

ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼ğŸ’»

